{% load static %}
<nav class="navbar navbar-expand-lg">
  <div class="container-fluid" style="margin-left: 30px; margin-right: 30px;">
    <a class="navbar-brand" href="{% url 'home' %}">
      <div class="brand-logo"><img src="{% static 'logo.png' %}" alt="Career Ladder Logo"></div>
      <span class="brand-text">Career Ladder</span>
    </a>

    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
            aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <i class="bi bi-list"></i>
    </button>

    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto align-items-center">
        <li class="nav-item">
          <a class="nav-link mx-2 {% if request.resolver_match.url_name == 'home' %} active{% endif %}"
             href="{% url 'home' %}" data-i18n="nav.home">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link mx-2{% if request.resolver_match.url_name == 'career_list' %} active{% endif %}"
             href="{% url 'career_list' %}" data-i18n="nav.career">Careers</a>
        </li>
         <li class="nav-item">
          <a class="nav-link mx-2{% if request.resolver_match.url_name == 'architecture_path' %} active{% endif %}"
             href="{% url 'architecture_path' %}" data-i18n="nav.archiPaths">University</a>
        </li>
        <li class="nav-item">
          <a class="nav-link mx-2{% if request.resolver_match.url_name == 'about' %} active{% endif %}"
             href="{% url 'about' %}" data-i18n="nav.aboutus">About us</a>
        </li>
        <li class="nav-item">
          <a class="nav-link mx-2{% if request.resolver_match.url_name == 'contact' %} active{% endif %}"
             href="{% url 'contact' %}" data-i18n="nav.contactUs">Contact us</a>
        </li>
        <li class="nav-item">
          <a class="nav-link{% if request.resolver_match.url_name == 'contact' %} active{% endif %}"
             href="{% url 'review_page' %}" data-i18n="nav.reviews">User Review</a>
        </li>

        <li class="ms-lg-3 d-flex align-items-center gap-2">
          <!-- Language Selector -->
<div class="language-selector">
  <div class="language-btn" id="languageBtn">
    <span id="currentLanguage">
      {% if current_language == 'my' %}
        MY
      {% else %}
        EN
      {% endif %}
    </span>
    <i class="bi bi-chevron-down"></i>
  </div>
  <div class="language-dropdown" id="languageDropdown">
    <div class="language-option {% if current_language == 'en' %}active{% endif %}" data-lang="en" onclick="switchLanguage('en')">
      <span>English</span>
    </div>
    <div class="language-option {% if current_language == 'my' %}active{% endif %}" data-lang="my" onclick="switchLanguage('my')">
      <span>မြန်မာ</span>
    </div>
  </div>
</div>

          <!-- Theme Toggle -->
          <button class="theme-toggle" id="themeToggle">
            <i class="bi bi-moon-fill"></i>
            <i class="bi bi-sun"></i>
          </button>

          <!-- User Profile Circle Icon -->
          {% if user.is_authenticated %}
          <!-- Logged In User - Circle Icon Dropdown -->
          <div class="nav-item dropdown">
            <a class="nav-link dropdown-toggle p-0 no-underline" href="#" id="profileDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              <div class="user-avatar-circle">
                {% if user.profile.photo %}
                  <img src="{{ user.profile.photo.url }}" alt="{{ user.username }}" class="profile-photo">
                {% else %}
                  <i class="bi bi-person-fill"></i>
                {% endif %}
              </div>
            </a>
            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="profileDropdown">
              <li class="dropdown-header">
                <strong>{{ user.username }}</strong>
                <div class="small text-muted">{{ user.email }}</div>
              </li>
              <li><hr class="dropdown-divider"></li>
              <li><a class="dropdown-item" href="{% url 'profile' %}">
                <i class="bi bi-person me-2"></i>Profile
              </a></li>
              <li><a class="dropdown-item" href="{% url 'changepassword' %}">
                <i class="bi bi-key me-2"></i>Change Password
              </a></li>
              <li><hr class="dropdown-divider"></li>
              <li><a class="dropdown-item" href="{% url 'logout_confirm' %}">
                <i class="bi bi-box-arrow-right me-2"></i>Logout
              </a></li>
            </ul>
          </div>
          {% else %}
          <!-- Guest User - Circle Icon Dropdown -->
          <div class="nav-item dropdown">
            <a class="nav-link dropdown-toggle p-0 no-underline" href="#" id="authDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              <div class="user-avatar-circle">
                <i class="bi bi-person"></i>
              </div>
            </a>
            <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="authDropdown">
              <li class="dropdown-header">
                <strong>Welcome</strong>
                <div class="small welcome-text">Sign in to your account</div>
              </li>
              <li><hr class="dropdown-divider"></li>
              <li><a class="dropdown-item" href="{% url 'login' %}">
                <i class="bi bi-box-arrow-in-right me-2"></i>Login
              </a></li>
              <li><a class="dropdown-item" href="{% url 'register' %}">
                <i class="bi bi-person-plus me-2"></i>Register
              </a></li>
            </ul>
          </div>
          {% endif %}
        </li>
      </ul>
    </div>
  </div>
</nav>

<style>
.user-avatar-circle {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-size: 1.2rem;
  cursor: pointer;
  border: 2px solid transparent;
  overflow: hidden;
}

.user-avatar-circle .profile-photo {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 50%;
}

.welcome-text {
  color: #6c757d !important;
}

.dropdown-header {
  padding: 0.5rem 1rem;
}

/* Remove underline on hover for profile icon */
.no-underline:hover,
.no-underline:focus {
  text-decoration: none !important;
}

.nav-link.dropdown-toggle.no-underline::after {
  display: none;
}
</style>

<script>
function switchLanguage(lang) {
  window.location.href = `/switch-language/${lang}/`;
}
</script>
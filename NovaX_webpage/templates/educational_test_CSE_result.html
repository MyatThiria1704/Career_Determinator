{% comment %} <!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Aptitude Results</title>
<style>
  :root{
    --dark-green:#1E2E25;--forest:#2F4E3C;--light-green:#A6CE39;--offwhite:#F8F9F5;--light-tint:#EEF5E9;--text-dark:#333333;--text-mid:#666666;--bright:#9AD44D;--yellowish:#C8E36B;
  }
  body{font-family:Inter,system-ui,Roboto,Arial;background:var(--offwhite);color:var(--text-dark);margin:0;padding:28px}
  .wrap{max-width:840px;margin:0 auto}
  h1{color:var(--dark-green);margin:6px 0 4px 0}
  p.lead{color:var(--text-mid);margin:0 0 20px 0}
  .card{background:var(--light-tint);border-radius:12px;padding:18px 20px;box-shadow:0 6px 18px rgba(0,0,0,0.06)}
  .row{display:flex;align-items:center;gap:16px;padding:12px 0;border-bottom:1px solid rgba(0,0,0,0.03)}
  .label{width:160px;font-weight:700;color:var(--forest)}
  .bar-wrap{flex:1;background:#fff;border-radius:8px;padding:6px}
  .bar{height:22px;border-radius:8px;background:linear-gradient(90deg,var(--light-green),var(--bright));width:0;transition:width 800ms ease}
  .percent{width:56px;text-align:right;font-weight:700;color:var(--text-mid)}
  .note{font-size:13px;color:var(--text-mid);margin-top:10px}
</style>
</head>
<body>
  <div class="wrap">
    <h1>Your Educational Match (CSE)</h1>
    <p class="lead">Here’s a rough percentage match for common career paths based on your responses. Use this as a guide — not a rule.</p>

    <div class="card" id="resultsCard">
      <!-- rows inserted by JS -->
    </div>

    <div style="margin-top:18px;display:flex;gap:12px">
  <button onclick="window.history.back()" 
          style="background:var(--forest);
                 color:var(--offwhite);
                 padding:10px 14px;
                 border-radius:10px;
                 border:0;
                 cursor:pointer">
    Back
  </button>

  <a id="downloadBtn" href="#"
     style="background:var(--light-green);
            color:var(--dark-green);
            padding:10px 14px;
            border-radius:10px;
            text-decoration:none;
            font-weight:700;
            position:relative;
            z-index:1000;
            cursor:pointer">
    Download results (PDF)
  </a>
</div>

<script>
  function renderResults(percentages){
    const card = document.getElementById('resultsCard');
    card.innerHTML = '';
    const entries = Object.entries(percentages).sort((a,b)=>b[1]-a[1]);
    entries.forEach(([career, pct])=>{
      const row = document.createElement('div'); row.className='row';
      const label = document.createElement('div'); label.className='label'; label.textContent = career;
      const barWrap = document.createElement('div'); barWrap.className='bar-wrap';
      const bar = document.createElement('div'); bar.className='bar';
      bar.style.width = '0%';
      const percent = document.createElement('div'); percent.className='percent'; percent.textContent = pct + '%';
      barWrap.appendChild(bar);
      row.appendChild(label); row.appendChild(barWrap); row.appendChild(percent);
      card.appendChild(row);
      setTimeout(()=> bar.style.width = pct + '%', 80);
    });

    // Handle PDF download
    document.getElementById('downloadBtn').addEventListener('click', (e) => {
      e.preventDefault();
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();

      doc.setFont('helvetica', 'bold');
      doc.setFontSize(18);
      doc.text("Career Aptitude Test Results", 20, 20);
      doc.setFontSize(12);
      doc.text("Here are your personalized match percentages:", 20, 30);

      let y = 45;
      Object.entries(percentages).forEach(([career, score]) => {
        doc.setFont('helvetica', 'normal');
        doc.text(`${career}: ${score}%`, 14, y);
        doc.setFillColor(166, 206, 57);
        doc.rect(70, y - 5, score, 5, 'F');
        y += 10;
      });

      doc.setFont('helvetica', 'italic');
      doc.text("Generated by NovaX _ Career Guidance System", 20, y + 15);

      doc.save("Career_Educational_Results(CSE).pdf");
    });
  }

  const raw = sessionStorage.getItem('aptitude_percentages');
  if (raw) {
    renderResults(JSON.parse(raw));
  }
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

</body>
</html> {% endcomment %}



<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>CSE Educational Test Results</title>
<style>
  :root{
    --dark-green:#1E2E25;--forest:#2F4E3C;--light-green:#A6CE39;--offwhite:#F8F9F5;--light-tint:#EEF5E9;--text-dark:#333333;--text-mid:#666666;--bright:#9AD44D;--yellowish:#C8E36B;
  }
  body{font-family:Inter,system-ui,Roboto,Arial;background:var(--offwhite);color:var(--text-dark);margin:0;padding:28px}
  .wrap{max-width:840px;margin:0 auto}
  h1{color:var(--dark-green);margin:6px 0 4px 0;font-size:28px}
  p.lead{color:var(--text-mid);margin:0 0 20px 0;font-size:15px}
  .card{background:var(--light-tint);border-radius:12px;padding:18px 20px;box-shadow:0 6px 18px rgba(0,0,0,0.06)}
  .row{display:flex;align-items:center;gap:16px;padding:12px 0;border-bottom:1px solid rgba(0,0,0,0.03)}
  .label{width:180px;font-weight:700;color:var(--forest)}
  .bar-wrap{flex:1;background:#fff;border-radius:8px;padding:6px}
  .bar{height:22px;border-radius:8px;background:linear-gradient(90deg,var(--light-green),var(--bright));width:0;transition:width 800ms ease}
  .percent{width:56px;text-align:right;font-weight:700;color:var(--text-mid)}
  .note{font-size:13px;color:var(--text-mid);margin-top:10px}
  .btn{padding:10px 14px;border-radius:10px;border:0;cursor:pointer;font-weight:700;text-decoration:none;display:inline-block;transition:all 0.2s}
  .btn-back{background:var(--forest);color:var(--offwhite)}
  .btn-back:hover{background:var(--dark-green)}
  .btn-download{background:var(--light-green);color:var(--dark-green)}
  .btn-download:hover{background:var(--bright)}
</style>
</head>
<body>
  <div class="wrap">
    <h1>Your Educational Match (CSE)</h1>
    <p class="lead">Here's a rough percentage match for CSE career paths based on your responses. Use this as a guide — not a rule.</p>

    <div class="card" id="resultsCard">
      <!-- rows inserted by JS -->
    </div>

    <div style="margin-top:18px;display:flex;gap:12px">
      <button onclick="window.history.back()" class="btn btn-back">
        ← Back
      </button>

      <a id="downloadBtn" href="#" class="btn btn-download">
        Download results (PDF)
      </a>
    </div>
  </div>

<script>
  function renderResults(percentages){
    const card = document.getElementById('resultsCard');
    card.innerHTML = '';
    const entries = Object.entries(percentages).sort((a,b)=>b[1]-a[1]);
    entries.forEach(([career, pct])=>{
      const row = document.createElement('div'); row.className='row';
      const label = document.createElement('div'); label.className='label'; label.textContent = career;
      const barWrap = document.createElement('div'); barWrap.className='bar-wrap';
      const bar = document.createElement('div'); bar.className='bar';
      bar.style.width = '0%';
      const percent = document.createElement('div'); percent.className='percent'; percent.textContent = pct + '%';
      barWrap.appendChild(bar);
      row.appendChild(label); row.appendChild(barWrap); row.appendChild(percent);
      card.appendChild(row);
      setTimeout(()=> bar.style.width = pct + '%', 80);
    });

    // Handle PDF download
    document.getElementById('downloadBtn').addEventListener('click', (e) => {
      e.preventDefault();
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();

      doc.setFont('helvetica', 'bold');
      doc.setFontSize(18);
      doc.text("CSE Career Educational Test Results", 20, 20);
      doc.setFontSize(12);
      doc.text("Here are your personalized match percentages:", 20, 30);

      let y = 45;
      Object.entries(percentages).forEach(([career, score]) => {
        doc.setFont('helvetica', 'normal');
        doc.text(`${career}: ${score}%`, 25, y);
        doc.setFillColor(166, 206, 57);
        doc.rect(90, y - 5, score * 0.8, 5, 'F');
        y += 10;
      });

      doc.setFont('helvetica', 'italic');
      doc.text("Generated by NovaX - Career Guidance System", 20, y + 15);

      doc.save("Career_Educational_Results_CSE.pdf");
    });
  }

  const raw = sessionStorage.getItem('aptitude_percentages');
  if (raw) {
    renderResults(JSON.parse(raw));
  }
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

</body>
</html>
